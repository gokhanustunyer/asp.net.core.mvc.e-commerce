@using Microsoft.AspNetCore.Identity
@inject IConfiguration _configuration
@inject SignInManager<AppUser> signInManager
@{
    var providers = await signInManager.GetExternalAuthenticationSchemesAsync();
}

<article class="main-header">
    @await Component.InvokeAsync("HeaderNotice")
    <header class="layout-header">
        <nav class="d-flex navbar-nav flex-row">
            <div class="navbar-brand">
                <a href="/"><img src="~/img/logo_transparent.png" /></a>
            </div>
            <ul class="navbar-items d-flex">
                <li class="navbar-item">
                    <a href="/erkek" class="navbar-link">Erkek</a>
                </li>
                <li class="navbar-item">
                    <a href="/kadin" class="navbar-link">Kadın</a>
                </li>
                <li class="navbar-item">
                    <a href="/cocuk" class="navbar-link">Çocuk</a>
                </li>
                <li class="navbar-item">
                    <a href="/bebek" class="navbar-link">Bebek</a>
                </li>
                <li class="navbar-item">
                    <a href="/spor" class="navbar-link">Spor</a>
                </li>
            </ul>
            <ul class="navbar-items d-flex">
                <li class="navbar-icon-item">
                    <a class="navbar-link">
                        <img src="~/img/icons/search.png" />
                    </a>
                </li>
                <li class="navbar-icon-item">
                    <a class="navbar-link" href="/user/favorites">
                        <img src="~/img/icons/heart.png" />
                    </a>
                </li>
                <li class="navbar-icon-item">
                    <a class="navbar-link dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown">
                        <img src="~/img/icons/user.png" width="16" />
                    </a>
                        @if (User.Identity.IsAuthenticated)
                        {
                        <div class="mt-2 dropdown-menu quicksand dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="/user/information">Profil</a>
                            <a class="dropdown-item" href="/user/cart">Sepetim</a>
                            <a class="dropdown-item" href="/user/favorites">Favorilerim</a>
                            <a class="dropdown-item" href="/user/orders">Siparişlerim</a>
                            <a class="dropdown-item" href="/user/comments">Yorumlarım</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="/logout">Çıkış Yap</a>
                        </div>
                        }
                        else
                        {
                        <div class="mt-2 dropdown-menu quicksand dropdown-menu-right" style="width:250px" aria-labelledby="dropdownMenuButton">
                            <div class="quicksand d-flex flex-column px-3 py-2">
                                <form action="/login" method="post" class="login-form d-flex flex-column" style="width:100%;">
                                    <input type="text" class="user-input" name="UserName" placeholder="E-mail Adresiniz"/>
                                    <input type="password" class="user-input mt-2" name="Password" placeholder="Şifreniz"/>
                                    <small class="text-right"><a style="border-bottom:1px solid #444453" href="/auth/forgotPassword">Şifremi Unuttum</a></small>
                                    <button class="user-button-dark mt-3">Giriş Yap</button>
                                    <div class="dropdown-divider"></div>
                                    <a class="user-button-dark-link text-center text-white" href="/register">Üye Ol</a>
                                </form>
                                <form action="/Auth/ExternalLogin" method="post" class="d-flex flex-column">
                                    <div class="row mt-2">
                                        <div class="col">
                                            <button type="submit" style="background-color:#3b5998" value="Facebook" class="external-btn facebook" name="provider"><i class="fa-brands fa-facebook-f" style="margin-right:.35rem"></i>ile Giriş</button>
                                        </div>
                                        <div class="col" style="text-align:right">
                                            <button type="submit" style="background-color:#ea4335" value="Google" class="external-btn google" name="provider"><i class="fa-brands fa-google" style="margin-right:.35rem"></i>ile Giriş</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        }
                    </div>
                </li>
                <li class="navbar-icon-item">
                    <a class="navbar-link" href="/user/cart">
                        <img src="~/img/icons/basket.png" />
                    </a>
                </li>
            </ul>
        </nav>
    </header>
</article>